---
import PageLayout from '@/layouts/CommonPage.astro'
import GalleryGrid from '@/components/gallery/GalleryGrid.astro'
import { loadGalleryItems } from '@/components/gallery/loadGallery'

const items = loadGalleryItems()
const headings = [
  { depth: 2, slug: 'collection', text: 'Gallery' },
  { depth: 2, slug: 'care-guide', text: '维护方式 Care guide' }
]
---
<PageLayout title='Gallery' {headings}>
  <section id='collection' class='mt-16 space-y-6'>
    <header class='space-y-2 text-center'>
      <h2 class='text-2xl font-semibold text-slate-900 dark:text-white sm:text-3xl'>我的日常瞬间</h2>
      <div class='mt-6 flex flex-wrap items-center justify-center gap-3 text-sm text-muted-foreground'>
        <label class='font-medium text-slate-600 dark:text-slate-200' for='gallery-sort'>排列方式</label>
        <select
          id='gallery-sort'
          class='rounded-full border border-white/60 bg-white/70 px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition backdrop-blur hover:border-white/80 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 dark:border-white/20 dark:bg-slate-900/70 dark:text-slate-100 dark:hover:border-white/40 dark:focus:border-primary dark:focus:ring-primary/40'
          data-gallery-sort
          aria-label='选择图库排列方式'
        >
          <option value='alpha-asc'>A-Z 升序</option>
          <option value='alpha-desc'>A-Z 降序</option>
          <option value='time-asc'>按时间升序</option>
          <option value='time-desc' selected>按时间降序</option>
        </select>
      </div>
    </header>
    {items.length > 0 ? (
      <GalleryGrid items={items} />
    ) : (
      <div class='rounded-3xl border border-dashed border-white/40 bg-white/40 p-10 text-center text-sm text-muted-foreground backdrop-blur-xl dark:border-white/10 dark:bg-white/5'>
        把照片放进 <code class='rounded-md bg-black/5 px-1 py-0.5 text-[0.9em] dark:bg-white/10'>src/assets/gallery/</code> 就能在这里看到它们。
      </div>
    )}
  </section>

  <section
    id='care-guide'
    class='mt-20 rounded-[32px] border border-white/35 bg-white/70 p-10 shadow-[0_35px_110px_-70px_rgba(15,23,42,0.55)] backdrop-blur-2xl dark:border-white/10 dark:bg-white/5 dark:shadow-[0_45px_140px_-80px_rgba(8,16,32,0.75)]'
  >
    <div class='mx-auto max-w-4xl space-y-8'>
      <header class='space-y-3 text-center'>
        <span class='text-xs uppercase tracking-[0.35em] text-muted-foreground'>Care guide</span>
        <h2 class='text-2xl font-semibold text-slate-900 dark:text-white sm:text-3xl'>如何维护这本小小图库</h2>
        <p class='text-sm text-muted-foreground sm:text-base'>
          三个步骤就能完成更新，无需写一行代码。
        </p>
      </header>
      <div class='grid gap-6 sm:grid-cols-3'>
        <article class='flex flex-col gap-3 rounded-3xl border border-white/35 bg-white/70 p-6 text-left shadow-[0_24px_70px_-60px_rgba(15,23,42,0.55)] backdrop-blur-xl transition-all duration-500 hover:border-white/60 hover:shadow-[0_28px_90px_-65px_rgba(15,23,42,0.6)] dark:border-white/10 dark:bg-white/5 dark:shadow-[0_32px_90px_-70px_rgba(8,16,32,0.75)]'>
          <h3 class='text-lg font-semibold text-slate-900 dark:text-white'>1. 放进文件夹</h3>
          <p class='text-sm leading-relaxed text-muted-foreground dark:text-slate-300'>
            把图片文件放入 <code class='rounded-md bg-black/5 px-1 py-0.5 text-[0.9em] dark:bg-white/10'>src/assets/gallery/</code>，可以是本地静态资源或远程链接。
          </p>
        </article>
        <article class='flex flex-col gap-3 rounded-3xl border border-white/35 bg-white/70 p-6 text-left shadow-[0_24px_70px_-60px_rgba(15,23,42,0.55)] backdrop-blur-xl transition-all duration-500 hover:border-white/60 hover:shadow-[0_28px_90px_-65px_rgba(15,23,42,0.6)] dark:border-white/10 dark:bg-white/5 dark:shadow-[0_32px_90px_-70px_rgba(8,16,32,0.75)]'>
          <h3 class='text-lg font-semibold text-slate-900 dark:text-white'>2. 按日期命名</h3>
          <p class='text-sm leading-relaxed text-muted-foreground dark:text-slate-300'>
            想自定义顺序时，把文件名写成 <code class='rounded-md bg-black/5 px-1 py-0.5 text-[0.9em] dark:bg-white/10'>标题__副标题__描述__24-05-03.jpg</code>，也可以只写到月或年，系统会按日期排序。
          </p>
        </article>
        <article class='flex flex-col gap-3 rounded-3xl border border-white/35 bg-white/70 p-6 text-left shadow-[0_24px_70px_-60px_rgba(15,23,42,0.55)] backdrop-blur-xl transition-all duration-500 hover:border-white/60 hover:shadow-[0_28px_90px_-65px_rgba(15,23,42,0.6)] dark:border-white/10 dark:bg-white/5 dark:shadow-[0_32px_90px_-70px_rgba(8,16,32,0.75)]'>
          <h3 class='text-lg font-semibold text-slate-900 dark:text-white'>3. 提交并部署</h3>
          <p class='text-sm leading-relaxed text-muted-foreground dark:text-slate-300'>
            Git 提交后，Vercel 会重新构建，最新的照片就会出现。
          </p>
        </article>
      </div>
    </div>
  </section>
</PageLayout>
